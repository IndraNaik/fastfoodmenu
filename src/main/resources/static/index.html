<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Food Menu</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            margin: 20px;
        }
        h2 {
            margin-top: 30px;
        }
        .table-responsive {
            margin-top: 20px;
        }
    </style>
</head>
<body>

<div class="container">
    <h1 class="text-center">Chicken's Kitchen</h1>

    <!-- Vegetarian Section -->
    <h2 class="text-success">Veg Menu</h2>
    <div class="table-responsive">
        <table class="table table-bordered table-striped rounded-3">
            <thead class="thead-light">
            <tr>
                <th>Item Name</th>
                <th>Price</th>
                <th>Status</th>
            </tr>
            </thead>
            <tbody id="veg-items">
            <!-- Vegetarian items will be dynamically added here -->
            </tbody>
        </table>
    </div>

    <!-- Non-Vegetarian Section -->
    <h2 class="text-danger">Non-Veg Menu</h2>
    <div class="table-responsive">
        <table class="table table-bordered table-striped rounded-3">
            <thead class="thead-light">
            <tr>
                <th>Item Name</th>
                <th>Price</th>
                <th>Status</th>
            </tr>
            </thead>
            <tbody id="non-veg-items">
            <!-- Non-vegetarian items will be dynamically added here -->
            </tbody>
        </table>
    </div>
</div>

<!-- Bootstrap JS and dependencies -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

<script>
    // Fetch Menu Data and Populate the Table
    async function fetchMenu() {
        try {
            const response = await fetch('https://458d-2409-40f0-28-ec80-5c5c-f66f-471d-b104.ngrok-free.app/api/menu');
            const data = await response.json(); // API response with pagination

            const menuItems = data.content; // Get 'content' array from response
            const vegTable = document.getElementById('veg-items');
            const nonVegTable = document.getElementById('non-veg-items');

            // Clear tables before adding new data
            vegTable.innerHTML = '';
            nonVegTable.innerHTML = '';

            // Iterate through menu items
            menuItems.forEach(item => {
                const row = document.createElement('tr');
                // item[1] = itemName, item[2] = price, item[3] = status
                row.innerHTML = `
                    <td>${item[1]}</td>
                    <td>â‚¹${item[2]}</td>
                    <td>${item[3] ? 'Available' : 'Unavailable'}</td>
                `;

                // Assuming classification based on item name. Modify this if you have a better way to determine veg/non-veg.
                const isVeg = item[1].toLowerCase().includes('veg');
                if (isVeg) {
                    vegTable.appendChild(row);
                } else {
                    nonVegTable.appendChild(row);
                }
            });
        } catch (error) {
            console.error('Error fetching menu data:', error);
        }
    }

    // Fetch menu on page load
    window.onload = fetchMenu;
</script>

</body>
</html>
